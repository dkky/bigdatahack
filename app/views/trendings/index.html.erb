<div class="spacer">
	This is for trending!

  <section class="#">
    <div class="trending_map" id="trends" style='width: 800px; height: 400px;'></div>
  </section>



  <section class="#">
	<% @trending.each do |trending| %>
      <div>
	      <div class="col-md-6" id="trending_<%= trending.id %>">

	      <h4>
	        <%= link_to trending.headline, controller: "trendings", action: "show", id: trending.id%>
	      </h4>
	      <p> Details: <strong><%= trending.details %></strong></p>
	      <hr>

	      </div>
      </div>
    <% end %>
  </section>


	<script type="text/javascript">
	handler = Gmaps.build('Google');
	handler.buildMap({ provider: {}, internal: {id: 'trends'}}, function(){

	  markers = handler.addMarkers(<%=raw @hash.to_json %>);

	  _.each(<%=raw @hash.to_json %>, function(json, index){
	    json.marker = markers[index];
	    $("#trending_" + json.id).on('mouseover', function() {
	      handler.getMap().setZoom(10);
	      json.marker.setMap(handler.getMap());
	      json.marker.panTo();
	      google.maps.event.trigger(json.marker.getServiceObject(), 'click');
	    });
	    });
	  handler.bounds.extendWith(markers);
	  handler.fitMapToBounds();
	});

	</script>
</div>